# Android应用横竖屏切换的两种方式，从表现上看最大的区别
我们知道android应用更改屏幕方向有两种方式，对应两种过程，一是销毁重建，二是设置onConfigurationChanged。在其中做改变方向的处理。

很久前我们的测试同学给计算器应用报了一个bug，说应用旋转到横屏后锁屏，再解锁。此时应用会先回到竖屏，再转换到横屏(图一)。正确的表现应该和浏览器的表现一样(图二),解锁后直接进入横屏。
![图一，表现错误，使用销毁重建的方式](http://i.imgur.com/m9kqNuh.gif)
![图二，表现正确，使用onConfigurationChanged](http://i.imgur.com/jsswjwK.gif)


百思不得其解。
后来解一个性能相关的bug，很巧地把原来销毁重建的方式，改成了onConfigurationChanged处理。无意间解了这个搁置很久的问题。

根据systrace的结果，推测可能的原因如下。
1. 销毁重建，其间会进行目标activity的销毁、重建以及其它系统调用。这一系列动作不能在一帧内完成，导致解锁时能看到竖屏切换到横屏的动作。
2. onConfigurationChanged，横竖屏切换其间只执行这一个函数，其中只有layout的MLD操作，这一系列动作在短时间内完成，因此我们看到的也就直接进入和横屏。
3. 可能有其它activity管理之间的原因，暂不清楚。知道的请不吝赐教。


